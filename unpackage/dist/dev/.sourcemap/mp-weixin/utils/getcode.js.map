{"version":3,"file":"getcode.js","sources":["utils/getcode.ts"],"sourcesContent":["interface AMapResponse{\r\n\tstatus:string,\r\n\tregeocode:{\r\n\t\taddressComponent:{\r\n\t\t\tcity:string,\r\n\t\t\tprovince:string\r\n\t\t}\r\n\t}\r\n}\r\nexport const reverseCode = (lo:number,la:number):Promise<string> =>{\r\n\treturn new Promise((resolve,reject)=>{\r\n\t\tuni.request({\r\n\t\t\turl: \"https://restapi.amap.com/v3/geocode/regeo\",\r\n\t\t\tdata:{\r\n\t\t\t\tkey:\"bc8cad0d87d1287717e5f1007d8a3309\",\r\n\t\t\t\tlocation: `${lo},${la}`\r\n\t\t\t},\r\n\t\t\tsuccess(res){\r\n\t\t\t\tconsole.log(\"高德api接口返回\",res)\r\n\t\t\t\tconst data:AMapResponse = res.data as AMapResponse\r\n\t\t\t\tif(data.status!==\"1\"){\r\n\t\t\t\t\treject(\"接口请求失败\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst address = data.regeocode.addressComponent.city.length?data.regeocode.addressComponent.city:data.regeocode.addressComponent.province\r\n\t\t\t\tconsole.log(\"地址是:\"+ address)\r\n\t\t\t\tresolve(address)\r\n\t\t\t},\r\n\t\t\tfail(err){\r\n\t\t\t\treject(`请求失败:${err.errMsg}`)\r\n\t\t\t}\r\n\t\t})\r\n\t})\r\n}\r\n"],"names":["uni"],"mappings":";;AASa,MAAA,cAAc,CAAC,IAAU,OAA6B;AAClE,SAAO,IAAI,QAAQ,CAAC,SAAQ,WAAS;AACpCA,kBAAAA,MAAI,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,MAAK;AAAA,QACJ,KAAI;AAAA,QACJ,UAAU,GAAG,EAAE,IAAI,EAAE;AAAA,MACtB;AAAA,MACA,QAAQ,KAAI;AACXA,sBAAA,MAAA,MAAA,OAAA,0BAAY,aAAY,GAAG;AAC3B,cAAM,OAAoB,IAAI;AAC3B,YAAA,KAAK,WAAS,KAAI;AACpB,iBAAO,QAAQ;AACf;AAAA,QACD;AACA,cAAM,UAAU,KAAK,UAAU,iBAAiB,KAAK,SAAO,KAAK,UAAU,iBAAiB,OAAK,KAAK,UAAU,iBAAiB;AACjIA,sBAAA,MAAA,MAAA,OAAA,0BAAY,SAAQ,OAAO;AAC3B,gBAAQ,OAAO;AAAA,MAChB;AAAA,MACA,KAAK,KAAI;AACD,eAAA,QAAQ,IAAI,MAAM,EAAE;AAAA,MAC5B;AAAA,IAAA,CACA;AAAA,EAAA,CACD;AACF;;"}